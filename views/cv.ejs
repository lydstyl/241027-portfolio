<!DOCTYPE html>
<html lang="fr">
<%- include('head', { title: "Mon CV", description: "Découvrez mon CV détaillé." }) %>
<body>
  <%- include('header') %>
  <main>
    <h2 class="text-2xl font-bold">Mon CV</h2>
    <p>Voici un exemple de CV en HTML rendu avec EJS.</p>

    <button id="loadCV">Charger le CV</button>
    <div id="cvData"></div>

  </main>
  <%- include('footer') %>

  <script>
    document.getElementById('loadCV').addEventListener('click', async () => {
      try {
        const response = await fetch('/api/cv');
        const skills = await response.json();
        console.log('Skills received:', skills);
        
        document.getElementById('cvData').innerHTML = `
          <h2>Compétences</h2>
          <ul>
            ${skills.map(skill => `
              <li>${skill.name} - Score: ${skill.score}/10 - Goal: ${skill.goalScore}/10</li>
            `).join('')}
          </ul>
        `;
      } catch (error) {
        console.error('Error fetching skills:', error);
      }
    });
  </script>
</body>
</html>
